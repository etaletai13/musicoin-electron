{"version":3,"sources":["helpers/convertToIcns.test.js"],"names":["testConvertPng","pngName","os","platform","Promise","resolve","reject","path","join","__dirname","error","icnsPath","stat","fs","statSync","expect","isFile","toBe","describe","test"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA;;AAEA,SAASA,cAAT,CAAwBC,OAAxB,EAAiC;AAC/B,MAAIC,aAAGC,QAAH,OAAkB,QAAtB,EAAgC;AAC9B;AACA,WAAOC,QAAQC,OAAR,EAAP;AACD;;AAED,SAAO,IAAID,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV;AAAA,WACjB,6BACEC,eAAKC,IAAL,CAAUC,SAAV,EAAqB,QAArB,EAA+B,gBAA/B,EAAiDR,OAAjD,CADF,EAEE,UAACS,KAAD,EAAQC,QAAR,EAAqB;AACnB,UAAID,KAAJ,EAAW;AACTJ,eAAOI,KAAP;AACA;AACD;;AAED,UAAME,OAAOC,aAAGC,QAAH,CAAYH,QAAZ,CAAb;;AAEAI,aAAOH,KAAKI,MAAL,EAAP,EAAsBC,IAAtB,CAA2B,IAA3B;AACAZ;AACD,KAZH,CADiB;AAAA,GAAZ,CAAP;AAgBD;;AAEDa,SAAS,iBAAT,EAA4B,YAAM;AAChCC,OAAK,+BAAL,0DAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC9BnB,eAAe,gBAAf,CAD8B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtC;;AAIAmB,OAAK,gCAAL,0DAAuC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAC/BnB,eAAe,oBAAf,CAD+B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvC;AAGD,CARD","file":"convertToIcns.test.js","sourcesContent":["import fs from 'fs';\nimport os from 'os';\nimport path from 'path';\nimport convertToIcns from './convertToIcns';\n\n// Prerequisite for test: to use OSX with sips, iconutil and imagemagick convert\n\nfunction testConvertPng(pngName) {\n  if (os.platform() !== 'darwin') {\n    // Skip png conversion tests, OSX is required\n    return Promise.resolve();\n  }\n\n  return new Promise((resolve, reject) =>\n    convertToIcns(\n      path.join(__dirname, '../../', 'test-resources', pngName),\n      (error, icnsPath) => {\n        if (error) {\n          reject(error);\n          return;\n        }\n\n        const stat = fs.statSync(icnsPath);\n\n        expect(stat.isFile()).toBe(true);\n        resolve();\n      },\n    ),\n  );\n}\n\ndescribe('Get Icon Module', () => {\n  test('Can convert a rgb png to icns', async () => {\n    await testConvertPng('iconSample.png');\n  });\n\n  test('Can convert a grey png to icns', async () => {\n    await testConvertPng('iconSampleGrey.png');\n  });\n});\n"]}